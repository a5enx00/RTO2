#include <windows.h>
#include <stdio.h>

int main()
{
    LPSTARTUPINFOW       si;
    PPROCESS_INFORMATION pi;
    BOOL                 success;
    
    si = new STARTUPINFOW();
    si->cb = sizeof(LPSTARTUPINFOW);

    pi = new PROCESS_INFORMATION();

    wchar_t cmd[] = L"notepad.exe\0";

    success = CreateProcess(
        NULL,
        cmd,
        NULL,
        NULL,
        FALSE,
        0,
        NULL,
        NULL,
        si,
        pi);

    if (!success) {
        printf("[x] CreateProcess failed.");
        return 1;
    }

    printf("dwProcessId : %d\n", pi->dwProcessId);
    printf("dwThreadId  : %d\n", pi->dwThreadId);
    printf("hProcess    : %p\n", pi->hProcess);
    printf("hThread     : %p\n", pi->hThread);

    CloseHandle(pi->hThread);
    CloseHandle(pi->hProcess);
}
